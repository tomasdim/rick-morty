(this["webpackJsonprick-and-morty"]=this["webpackJsonprick-and-morty"]||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(40),r=a.n(c),o=(a(76),a(77),a(29)),i=a(8),s=a(70),u=a(11),l=a(31),d=a.n(l),j=a(47),h=a.n(j),O=a(5);function b(e){return function(){return console.log(e)}}function p(e){var t=e.name,a=e.image,n=e.rightClick,c=e.leftClick,r=e.hide;return Object(O.jsx)("div",{className:d.a.container,children:Object(O.jsxs)("div",{className:d.a.card,children:[Object(O.jsx)("img",{alt:"rick",src:a}),Object(O.jsx)("p",{className:d.a.name,children:t}),!r&&Object(O.jsxs)("div",{className:d.a.actions,children:[Object(O.jsx)("div",{onClick:c||b("left"),className:d.a.left,children:Object(O.jsx)(h.a,{name:"thumbs-down",size:"2x"})}),Object(O.jsx)("div",{onClick:n||b("right"),className:d.a.right,children:Object(O.jsx)(h.a,{name:"heart",size:"2x"})})]})]})})}p.defaultProps={name:"Rick Sanches",image:"https://rickandmortyapi.com/api/character/avatar/1.jpeg"};var f=a(61),g=a.n(f),v=a(26),m=a(42),y=a(27),x=(a(82),a(32));a(100),a(107);x.a.initializeApp({apiKey:"AIzaSyBSZTohkYDgpPL6jHZwisU7CO2QipLdRmI",authDomain:"cursoredux-2bc60.firebaseapp.com",projectId:"cursoredux-2bc60",storageBucket:"cursoredux-2bc60.appspot.com",messagingSenderId:"747418231846",appId:"1:747418231846:web:dbc2cfddae401a7e86f2e7",measurementId:"G-DMB56C6N34"});var _=x.a.firestore().collection("favs");var S,C=a(34),E=a(60),N={fetching:!1,array:[],current:{},favorites:[],nextPage:1},k=new C.a({uri:"https://rickandmortyapi.com/graphql"}),A="UPDATE_PAGE",I="GET_CHARACTERS",R="GET_CHARACTERS_SUCCESS",T="GET_CHARACTERS_ERROR",w="REMOVE_CHARACTER",G="ADD_TO_FAVORITES",P="GET_FAVS",L="GET_FAVS_SUCCESS",F="GET_FAVS_ERROR";var U=function(){return function(e,t){return e({type:P}),function(e){return _.doc(e).get().then((function(e){return e.data().array}))}(t().user.uid).then((function(t){e({type:L,payload:Object(y.a)(t)})})).catch((function(t){console.log(t),e({type:F,payload:t.message})}))}},D=function(){return function(e,t){var a=Object(E.a)(S||(S=Object(m.a)(["\n    query ($page: Int) {\n      characters(page: $page) {\n        info {\n          pages\n          next\n          prev\n        }\n        results {\n          name\n          image\n        }\n      }\n    }\n  "])));e({type:I});var n=t().characters.nextPage;return k.query({query:a,variables:{page:n}}).then((function(t){var a=t.data,n=t.error;n?e({type:T,payload:n}):(e({type:R,payload:a.characters.results}),e({type:A,payload:a.characters.info.next?a.characters.info.next:1}))}))}};var H=Object(v.b)((function(e){return{chars:e.characters.array}}),{addToFavoritesAction:function(){return function(e,t){var a=t().characters,n=a.array,c=a.favorites,r=t().user.uid,o=n.shift();c.push(o),function(e,t){_.doc(t).set({array:e})}(c,r),e({type:G,payload:{array:Object(y.a)(n),favorites:Object(y.a)(c)}})}},removeCharacterAction:function(){return function(e,t){var a=t().characters.array;a.shift(),a.length?e({type:w,payload:Object(y.a)(a)}):D()(e,t)}}})((function(e){var t=e.addToFavoritesAction,a=e.chars,n=e.removeCharacterAction;function c(){n()}function r(){t()}return Object(O.jsxs)("div",{className:g.a.container,children:[Object(O.jsx)("h2",{children:"Personajes de Rick y Morty"}),Object(O.jsx)("div",{children:function(){var e=a[0];return Object(O.jsx)(p,Object(i.a)({rightClick:r,leftClick:c},e))}()})]})})),J=a(66),B=a.n(J);var V=Object(v.b)((function(e){return{characters:e.characters.favorites}}))((function(e){e.favs;var t=e.characters,a=void 0===t?[0]:t;return Object(O.jsxs)("div",{className:B.a.container,children:[Object(O.jsx)("h2",{children:"Favoritos"}),a.map((function(e,t){return Object(n.createElement)(p,Object(i.a)(Object(i.a)({hide:!0},e),{},{key:t}))})),!a.length&&Object(O.jsx)("h3",{children:"No hay personajes agregados"})]})})),q=a(67),M=a.n(q),z={loggedIn:!1,fetching:!1},W="LOGIN",Z="LOGIN_SUCCESS",$="LOGIN_ERROR",X="LOG_OUT";var K=Object(v.b)((function(e){var t=e.user;return{fetching:t.fetching,loggedIn:t.loggedIn}}),{doGoogleLoginAction:function(){return function(e,t){return e({type:W}),function(){var e=new x.a.auth.GoogleAuthProvider;return x.a.auth().signInWithPopup(e).then((function(e){return e.user}))}().then((function(a){var n;e({type:Z,payload:{uid:a.uid,displayName:a.displayName,email:a.email,photoURL:a.photoURL}}),n=t(),localStorage.storage=JSON.stringify(n),U()(e,t)})).catch((function(t){console.log(t),e({type:$,payload:t.message})}))}},logOutAction:function(){return function(e,t){x.a.auth().signOut(),e({type:X}),localStorage.removeItem("storage")}}})((function(e){var t=e.logOutAction,a=e.loggedIn,n=e.fetching,c=e.doGoogleLoginAction;return n?Object(O.jsx)("h2",{children:"Cargando..."}):Object(O.jsxs)("div",{className:M.a.container,children:[a?Object(O.jsx)("h1",{children:"Cierra tu sesi\xf3n"}):Object(O.jsx)("h1",{children:"Inicia Sesi\xf3n con Google"}),a?Object(O.jsx)("button",{onClick:function(){t()},children:"Cerrar Sesi\xf3n"}):Object(O.jsx)("button",{onClick:function(){c()},children:"Iniciar"})]})}));a(69),a(109);function Q(e){var t=e.path,a=e.component,n=Object(s.a)(e,["path","component"]),c=localStorage.getItem("storage");return(c=JSON.parse(c))&&c.user?Object(O.jsx)(u.b,Object(i.a)({path:t,component:a},n)):Object(O.jsx)(u.a,Object(i.a)({to:"/login"},n))}function Y(){return Object(O.jsxs)(u.d,{children:[Object(O.jsx)(Q,{exact:!0,path:"/",component:H}),Object(O.jsx)(Q,{path:"/favs",component:V}),Object(O.jsx)(u.b,{path:"/login",component:K})]})}var ee=function(){return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"nav-bar",children:[Object(O.jsx)(o.b,{className:"link",activeClassName:"active",exact:!0,to:"/",children:"Inicio"}),Object(O.jsx)(o.b,{className:"link",activeClassName:"active",to:"/favs",children:"Favoritos"}),Object(O.jsx)(o.b,{className:"link",activeClassName:"active",to:"/login",children:"Login"})]}),Object(O.jsx)(Y,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(105);var te=a(38),ae=a(68),ne=Object(te.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(i.a)({},z);case Z:return Object(i.a)(Object(i.a)(Object(i.a)({},e),{},{fetching:!1},t.payload),{},{loggedIn:!0});case $:return Object(i.a)(Object(i.a)({},e),{},{fetching:!1,error:t.payload});case W:return Object(i.a)(Object(i.a)({},e),{},{fetching:!0});default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(i.a)(Object(i.a)({},e),{},{nextPage:t.payload});case L:return Object(i.a)(Object(i.a)({},e),{},{fetching:!1,favorites:t.payload});case F:return Object(i.a)(Object(i.a)({},e),{},{fetching:!1,error:t.payload});case P:return Object(i.a)(Object(i.a)({},e),{},{fetching:!0});case G:return Object(i.a)(Object(i.a)({},e),t.payload);case w:return Object(i.a)(Object(i.a)({},e),{},{array:t.payload});case I:return Object(i.a)(Object(i.a)({},e),{},{fetching:!0});case R:return Object(i.a)(Object(i.a)({},e),{},{array:t.payload,fetching:!1});case T:return Object(i.a)(Object(i.a)({},e),{},{fetching:!1,error:t.payload});default:return e}}}),ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.c;a(16);var re=function(){var e=Object(te.d)(ne,ce(Object(te.a)(ae.a)));return D()(e.dispatch,e.getState),function(e){var t=localStorage.getItem("storage");(t=JSON.parse(t))&&t.user&&e({type:Z,payload:t.user})}(e.dispatch),e}(),oe=(new C.a({uri:"https://rickandmortyapi.com/graphql"}),function(){return Object(O.jsx)(o.a,{children:Object(O.jsx)(ee,{})})}),ie=function(){return Object(O.jsx)(v.a,{store:re,children:Object(O.jsx)(oe,{})})};r.a.render(Object(O.jsx)(ie,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},31:function(e,t,a){e.exports={container:"card_container__198sF",card:"card_card__2gIgj",name:"card_name__7STOH",actions:"card_actions__24r4a",left:"card_left__3JyHP",right:"card_right__1Mg18"}},61:function(e,t,a){e.exports={container:"home_container__3Pfrv"}},66:function(e,t,a){e.exports={container:"favs_container__B7J0p"}},67:function(e,t,a){e.exports={container:"login_container__2j8Zr"}},76:function(e,t,a){},77:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.4c062b1d.chunk.js.map